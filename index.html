<canvas id="canvas" width="800" height="800"></canvas>

<script type="text/javascript" src="cube.js"></script>
<script>

  //TODO: Enable custom cube coloring with mouse click. 1-6 color selection.
  //TODO: Add moves logging, download.
  const canvas = document.getElementById("canvas");
  const ctx = canvas.getContext("2d");

  const cube = new Cube();
  var selected_color = 'red';
  draw();

  window.addEventListener("keydown", function(event) {
      if(event.defaultPrevented) {
          return;
      }

      switch(event.code) {
          case "Digit1":
          case "Digit2":
          case "Digit3":
          case "Digit4":
          case "Digit5":
          case "Digit6":
          selected_color = cube.colors[Number(event.code.slice(-1))-1];
          break;
          case "KeyA":
          cube.rotateFace(0, false);
          break;
          case "KeyS":
          cube.rotateFace(0, true);
          break;
          case "KeyD":
          cube.rotateFace(1, false);
          break;
          case "KeyF":
          cube.rotateFace(1, true);
          break;
          case "KeyG":
          cube.rotateFace(2, false);
          break;
          case "KeyH":
          cube.rotateFace(2, true);
          break;
          case "KeyJ":
          cube.rotateFace(3, false);
          break;
          case "KeyK":
          cube.rotateFace(3, true);
          break;
          case "KeyE":
          cube.rotateFace(4, false);
          break;
          case "KeyR":
          cube.rotateFace(4, true);
          break;
          case "KeyC":
          cube.rotateFace(5, false);
          break;
          case "KeyV":
          cube.rotateFace(5, true);
          break;
      }

      draw();
  });

  function getCursorPosition(canvas, event) {
      const rect = canvas.getBoundingClientRect();
      const x = event.clientX - rect.left;
      const y = event.clientY - rect.top;
      return [x, y];
  }

  canvas.addEventListener('mousedown', function(e) {
      getCursorPosition(canvas, e);
  })

  function drawLegend(ctx, x, y, selected_color) {
      // Draw selected color
      ctx.setLineDash([]);
      ctx.fillStyle = selected_color;
      ctx.fillRect(x, y, 20, 20);
      ctx.strokeRect(x, y, 20, 20);
      ctx.fillStyle = 'black';
      ctx.font = "15px Arial";
      ctx.fillText(" - Selected color. (1-6 to select a color)", x + 30, y + 15);

      // Draw controls.
      ctx.fillStyle = 'red';
      ctx.fillRect(x, y + 60, 20, 20);
      ctx.fillStyle = 'black';
      ctx.strokeRect(x, y + 60, 20, 20);
      ctx.fillText(" - A, S Red face", x + 30, y + 60 + 15);
      ctx.fillStyle = 'blue';
      ctx.fillRect(x, y + 90, 20, 20);
      ctx.fillStyle = 'black';
      ctx.strokeRect(x, y + 90, 20, 20);
      ctx.fillText(" - D, F Blue face", x + 30, y + 90 + 15);
      ctx.fillStyle = 'orange';
      ctx.fillRect(x, y + 120, 20, 20);
      ctx.fillStyle = 'black';
      ctx.strokeRect(x, y + 120, 20, 20);
      ctx.fillText(" - G, H Orange face", x + 30, y + 120 + 15);
      ctx.fillStyle = 'green';
      ctx.fillRect(x, y + 150, 20, 20);
      ctx.fillStyle = 'black';
      ctx.strokeRect(x, y + 150, 20, 20);
      ctx.fillText(" - J, K Green face", x + 30, y + 150 + 15);
      ctx.fillStyle = 'white';
      ctx.fillRect(x, y + 180, 20, 20);
      ctx.fillStyle = 'black';
      ctx.strokeRect(x, y + 180, 20, 20);
      ctx.fillText(" - E, R White face", x + 30, y + 180 + 15);
      ctx.fillStyle = 'yellow';
      ctx.fillRect(x, y + 210, 20, 20);
      ctx.fillStyle = 'black';
      ctx.strokeRect(x, y + 210, 20, 20);
      ctx.fillText(" - C, V Yellow face", x + 30, y + 210 + 15);
  }

  function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      cube.drawCube(ctx, 10, 10);
      drawLegend(ctx, 300, 10, selected_color);
  }
</script>
